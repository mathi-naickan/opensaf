OpenSAF 4.3.3 (released 2014-10-07)

    This is a maintenance release. The following items were fixed and/or added:

    * IMM: Changed severity to ER for syslog message for fevs out of order #1149
    * dtm: fix compiler warning [#1152]
    * dtm: fix NULL ptr dereference [#1152]
    * imm: fix checks for allocated memory [#1130]
    * immtools: fix loading long data in immcfg [#1130]
    * imm: fix loading long data in immload [#1130]
    * base: remove setgid/setuid calls in execute_timed [#1138]
    * clm: do not send stale track to the node that rebooted and cameback [#1120]
    * clm: during failover, process agent down before node downs [#1120]
    * clm: avoid stale node down processing and unexpected track callback [#1120]
    * immtools: allocate enough memory for long log format in immcfg [#1089]
    * imm: add missing check in seach init [#1135]
    * IMM: Failure to send completed to PBE defaulted to ccb-recovery [#1127]
    * tools/safntf : validate ntfsend options V3 [#1069]
    * imm: In immnd_evt_proc_ccb_compl_rsp skip to end if PBE-OI is detached [#1096]
    * immtools: fix number of admin owner names to one [#1065]
    * imm:corrected trace log in setImplementer[#1084]
    * imm: fix memory leak in immload [#1099]
    * amfd : fix compilation issue [#759]
    * imm:fix memory leaks in finalizeSync [#1085]
    * amf : disable oper state of faulty comp if SU is disabled [#1035]
    * amfd : update saAmfSINumCurr<Actv/Stdby>Assignments in SI during nodefailover [#759]
    * imm: Corrected trace statement in cleanTheBasement [#1086]
    * imm:Removed the erase of iterator in migrateObj[#1097]
    * imm:corrected missing cl_node NULL check for imma resurrect [#1094]
    * imm:initalized the uninitialized variables in obj_delete and rt_obj_delete[#1098]
    * imm: check the end ccb iterator before accessing data for ccb augument [#1100]
    * imm: In saImmOiAugmentCcbInitialize goto function end if om_handle_init fails [#1095]
    * IMM: Extend osafassert check in ImmModel::adjustEpoch [#1090]
    * imm:corrected uninitalized error code in ccb delete and Completed rsp [#1103]
    * imm: Return TRY_AGAIN only when object apllier matches the Re-using implementerset info [#1078]
    * imm: ccbCreate - Fix expression for appending default values to ccb-create-callback [#1083]
    * IMM: Add client node NULL-check in immnd_evt_proc_fevs_forward [#1088]
    * imm: Compare err instead of assign in immnd_evt_proc_rt_object_delete [#1087]
    * smfd: better handling of admin op SI_SWAP return codes [#940]
    * base: check and truncate(with character T) logtrace messages >= 1023 bytes [#970]
    * clm: imm reinit mechanism shall check for impl_set flag in BAD_OPER scenarios [#1067]
    * IMM: Reduce log severity database size messages [#866]
    * immtools:corrected variable declaration for immpopulate [#1052]
    * amfd: submit the left out portion of the fix [#708]
    * IMM: PBE exits on errors where sqlite-handle has been closed [#996]
    * imm:Return AIS_OK when m_NCS_IPC_RECEIVE receives NULL in dispatch block[#937]
    * imm:Return TRY_AGAIN if implemeter is not yet discarded [#946]
    * imma: add missing lock when traversing client db from mds thread [#1033]
    * IMM: Document persistence behavior for system attribues [#967]
    * IMM: immsv/README Clarify when attribute default values get assigned [#968]
    * imm:corrected memory corruption problem when ccberrorstring is used in modify/create callback[#961]
    * log: Add new tests for validation of attributes at create/modify stream conf obj [#448]
    * log: Fix incorrect test cases in current test suite [#448]
    * log: Fix validity check for IMM create/modify stream [#448]
    * amfd: instantiate su as per saAmfSGNumPrefInserviceSUs [#445]
    * amfd: return admin op when csi assign/remove is over [#372]
    * amfd: return FAILED_OP to RtAttrUpdateCallbackT if RtObjectUpdate_2 fails [#426]
    * amfd: fix build issue [#582]
    * amfd: allow lock on su after issue of shutdown [#582]
    * amfd: start clm track and mark sg stable after node failover [#708]
    * amfd : fix amfd crash during su level faults in su or node lock [#992]
    * amfnd : mark SU UNINSTANTIATED if all comps are UNINSTANTIATED during compfailover [#359]
    * amfnd : mark single comp SU RESTARTING during component restart [#358]
    * amfd : fix node failover while assigning standby state during si-swap [#309]
    * amfd : reply for admin operation on SG after its completion [#293]
    * amfnd: Fix compilation issue on opensaf-4.3.x branch [#870]
    * amfnd: remove white space [#870]
    * amfnd: log events relating to error escalation timers [#870]
    * smf: retry modify information model upon CCB abort post cluster restart [#973]
    * ntf: Add testcase for testing that 256 is not a valid length for SaNameT [#892]
    * ntf: Fix validation of length for SaNameT [#892]
    * log: New testcases for testing max length handling og SaNameT [#891]
    * log: Fix server error handling if SaNameT length is 256 or bigger [#891]
    * log: Fix validation of SaNameT length in agent [#891]
    * ntf: use thread safe localtime_r instead of localtime [#958]
    * amf: use thread safe localtime_r instead of localtime [#958]
    * mds: use thread safe localtime_r instead of localtime [#958]
    * osaf: use thread safe localtime_r instead of localtime [#958]
    * log: delete associated runtime object whenever app stream is deleted [#917]
    * IMM:  Provide validation for config changes on imm service objects [#951]
    * amf : perform node-switchover after component cleanup [#387]
    * amfd : update dependent dep_state if fail-over of dependent fails [#692]
    * amfd : standby AMFD should process ccb completed cbk for delete [#947]
    * log: For overload limits use environment variable value if limit in config object is 0 [#941]
    * Did osaf_abort() for invalid fd in RDA recv[#928]
    * amfnd : speed up shutdown of standby SC upon failover during its shutdown [#942]
    * avd: default saAmfSGNumPrefInserviceSUs to unlimited [#278]
    * base: Corrected handling of raise_obj, rmv_obj file descriptors of Selection object [#928]
    * amfd : skip processing of ccb completed cbk at standby amfd [#305]
    * base: Do not use slashes in the names of POSIX shared memory segments [#909]
    * amfnd: Fix spelling mistakes [#870]
    * amfnd: Improve logging for error escalation decisions [#870]
    * avnd: stop running timers when su is locked-in [#831]
    * amfd: Remove asserts from validation routines [#849]
    * amfnd: fix process of proxy proxied cleanup on OpenSAF shutdown [#629]
    * amfd: send node down notification during controller failover [#914]
    * avd: create SI to store ckpt:ed dep_state [#926]
    * log: handle ending quote for messages in variable log records [#882]
    * smfsv: Comments in ETF schema for SaTimeT unified, all specifies nanoseconds [#925]
    * amfnd : fix SU restart escalation [#885].
    * immpbe: unlink any /tmp/imm.db.xxxx file and journal when exiting on error [#869]
    * clm: pass client_id for deletion to avoid accessing freed memory [#888]
    * smfd: campaign can be committed after cluster reboot in state completed [#906]
    * amfd: fix compilation problem [#854]
    * amfd: return try_again to sg admin unlock-in if any su is in terminating state [#854]
    * smfd: wait for node destination before command execution [#893]
    * amfnd : avoid multiple clean up of comps during shutdown phase [#890].
    * amfd: update RT objects during node-failover of active controller [#494].
    * amfd: Allow multiple csi addition in single ccb [#750]
    * amfd: instantiate mw sus when node is joining [#863]
    * clm: setup mds and mbcsv role first during role change [#800]
    * clm: process node down outside impl_set thread to avoid race [#800]
    * avd: fix SU in-service check [#493]
    * osaf: Fix compilation errors when building with GCC 4.9.0 [#883]
    * amfd: syslog no assignment of SI when it is unlocked [#867]
    * log: saflogtest to return EXIT_FAILURE when SaLogWriteLogCallbackT fails [#884]
    * log: saflogger to return EXIT_FAILURE when SaLogWriteLogCallbackT fails [#884]
    * log: fix errno usage for calls to strtoul [#841]
    * log: ignore environment variables when config object exists [#841]
    * log: Log should not retry when close() returns EINTR [#147]
    * amfnd: Cancel qscing timer on CSI removal [#583]
    * amfd: fix infinite loop when processing CLM node tracking [#877]
    * amfd: assign only one csi per component for NPI SU [#856]
    * log: allow zero sized log records for app streams [#857]
    * avd: Respond with TRY_AGAIN to admin ops during a controller switch-over [#821]
    * amfd: fix imm job update [#868]
    * OSAF: fix errors compiled with 32-bit compiler [#838]
    * log: use %z length modifier for printing size_t [#852]
    * log: saflogger tool to honour try again [#839]
    * amfnd: update saAmfSURestartCount & saAmfCompRestartCount during escalations [#847]
    * IMM:Removed Implementer name for config objects while loading [#543]
    * amfnd: fix re-instantiation of failed component [#844]
    * avsv: include su_failover in REG_SU msg [#574]
    * avsv: include and use comp capability in SUSI msg [#574]
    * avsv: include and use sirank in SUSI msg [#574]
    * IMM: fix memory leak in IMM [#834]
    * amfd: return AIS_OK instead of BAD_OP for si-swap admin op [#823]
    * amfd: act on dependent if sponsor gets unassigned in NoRed [#832]
    * amfd: return BAD_OP for repair operation for su hosted on absent node [#826]
    * amfd: return TRY_AGAIN for su/node lockin op if su pres state is not appropriate [#807]
    * avnd: send SUSI response after cleanup of comp [#822]
    * avsv: cleanup dnd edu [#574]
    * cpsv: avoid stale ckpt IMM objects creation if Ckpt Open returns err 18 [#559]
    * amfnd: fix failover of NPI SU during SU lock with fault [#820]
    * avd: auto clear comp cleanup failed alarm [#538]
    * avd: reboot node when term-failed SU [#538]
    * avd: allow modification of node repair attributes [#538]
    * amfd: send notification when SI first assigned to SU [#544]
    * pyosaf: Add support for extended Ckpt api [#802]
    * logsv: Do not allow NULL pointers for string variables in OI validity check [#771]
    * logsv: Handle error return from localtime [#805]
    * logsv: Fix handling of Om initialize / finalize when creating app stream [#804]
    * IMMTOOLS: fix the schema name for immxml tools to comply with the latest schema known by the release [#796]
    * smfd: deletion of objects owned by SMF possible regadless of DN [#752]
    * osaf: Update the commit message template [#791]
    * amfd: defer switch-over of dependent SI to after sponsor SI [#803]
    * IMMTOOLS: fix incorrect error message for deleting class in immcfg [#794]
    * IMM: Use existing PBE mutation record to guard against concurrent class create/delete [#757]


OpenSAF 4.3.2 (released 2014-03-05)

    This is a maintenance release. The following items were fixed and/or added:

    * clm: initialize address family length with default value [#800]
    * IMMTOOLS: add support for forwards compatibility of attribute flags [#116]
    * IMM: add support for forwards compatibility of attribute flags [#116]
    * Added tag 4.3.2RC1 for changeset 5503b2656726
    * release: Update configure.ac for version 4.3.2RC1
    * java: Replace select() with osaf_poll() to avoid 1024 fd limit [#452]
    * osaf: Replace select() with osaf_poll() to avoid 1024 fd limit [#452]
    * base: Add osaf_poll.h and osaf_time.h APIs [#580]
    * amfnd: handle avadown in shutting down [#778]
    * amfnd : avoid accessing list of csi in comp after removal of assignments [#739]
    * amf: set comp oper state to enable when corresponding node is present [#324]
    * IMM: Improved logging at CCB validation error [#669]
    * IMM: Adjust log message & severity for intentional PBE termination [#764]
    * smfd: No interference when error string is set after campaign parsing error [#763]
    * clm and ntf: increase csisetcallback timeout to 40 seconds [#720]
    * ntf: initialize saflog() early during clm init [#720]
    * clm: initialize saflog() early during clm init [#720]
    * osaf: add a new saflog_init routine [#720]
    * amfnd : fix cleanup of assigned comp in shutdown [#767]
    * logsv: Fix assert when switch over after last close of app stream [#714]
    * cpsv: cpd broadcast cpnd down to all cpnd opened the same ckpt [#530]
    * amfnd: correct npi su term failure handling during opensaf shutdown [#765]
    * amfd: create comp if not found during decoding [#761]
    * amfd: fix errors reported in valgrind [#715]
    * IMM: Avoid repeated lookup of admo in abort of ccbCreate [#724]
    * amfd: fix out-of-bounds read from nodelist array [#719]
    * uml: Update UML environment to Linux 3.13.1, busybox 1.21.1 [#762]
    * mds: Remove unnecessary syslog message about TIPC importance [#755]
    * IMM: Correct misleading comment in saImmOm_A_2_12.h (#747)
    * IMM: Clarify that completed-callback is meaningsless for appliers (#748)
    * amfnd: escalate comp errors in quiesced HA state [#601]
    * amfnd: guard failed state file removal [#741]
    * amfd: remove UNKNOWN word from saflog [#362]
    * amfnd: ignore healthcheck command response for terminated component [#732]
    * base: Use default scheduling policy when configured policy is invalid [#690]
    * base: Reverted the fixed memory leaks in base [#731]
    * amfd: support for delete of unassigned comp [#691]
    * amfnd: Correct the check for su [#717]
    * smfd: attribute saAmfSUMaintenanceCampaign is set for restartable units [#703]
    * base: memory leaks in base [#712]
    * java: Fix code indentation and whitespace errors
    * dtm: Remove non-ASCII character from code comment
    * IMMTOOLS: fix RDN value with a DN of an associated object in immcfg [#702]
    * java: Fix compiler warnings and treat warnings as errors [#649]
    * amfd: Adjust attr value during name_value_pair update [#655]
    * amf : return ERR_NOT_SUPPORTED for unsupported feature in APIs [#170]
    * amfd : reset SI admin state to UNLOCKED if fault occurs during SHUTDOWN op [#490]
    * amfd : honor SI dependency within SU in sufailover recovery [#503]
    * amfnd : issue remove cbk to all comps when CSIs areunevenly distributed [#233]
    * amfnd: Reboot payload when link between Controller and Payload flickers [#600]
    * amfd: Reject admin op if csi add/remove is in progress [#627]
    * amfd: Return SA_AIS_ERR_BAD_OPERATION if error occurs during si-swap [#214]
    * amfd: Use correct CLC command to term/clean component [#104]
    * nid: Fix infinite loops when system calls fail [#645]
    * amfd: Corrected compiler warning [#91]
    * amfd: Donot send empty susi to amfnd [#91]
    * immom/pyosaf: Fix saImmOm.py [#626]
    * immom/pyosaf: Fix saImmOm.py [#626]
    * SMF: comparsion of attr saAmfSUMaintenanceCampaign and campaign DN corrected(#640)
    * immom/pyosaf: Fix saImmOm.py [#626]
    * IMMND replies BAD_HANDLE if client node is missing for non fevs request [#637]
    * amfd: enable NPI component oper state during admin repair [#182]
    * amfa: Fill numberOfItems whensaAmfProtectionGroupTrack or saAmfProtectionGroupTrack_4 return SA_AIS_ERR_NO_SPACE [#189]
    * amfd: Decrement num_attributes when last attrValue is deleted [#302]
    * clm: treat ERR_EXIST as TRY_AGAIN and support a flag for pending RTupdates [#528]
    * SMF: Config parameters are read when node director becomes active (#633)
    * amf: support CSI remove in unlocked [#194]
    * amf: support CSI add in unlocked NPI [#194]
    * immoi/pyosaf: Fix saImmOi.py [#615]
    * IMM: Support for 'immadm -a (--admin-owner) <admo-name>' [#613]
    * IMM: corrected Error notifcation when RDN attribute length is greater than 64 [#614]
    * IMM: fix memory problem in saImmOmSearchNext_2 [#612]
    * avd: saflog all model changes [#611]
    * amfd: Instantiate only the uninstantiated SUs in clm track callback [#608]
    * amf: change saAmfResponse to be synchronous in TerminateCallback context [#570]
    * leap: change ncs_os_lock to syslog before abort [#605]
    * CLM: free the allocated memory in CLMA track callback when version B.1.1 [#604]
    * IMM: free the client node if IMMA intialisation fails [#602]
    * ckpt/pyosaf: corrected incorrectly specified methods in saCkpt.py [#590]
    * amfnd : reset assignment flag when no assignment pending on SU [#403]
    * mds: configurable TIPC importance (minor doc update) [#589]
    * amfnd: reset HC state at tmr start [#568]
    * mds: configurable TIPC importance [#589]
    * lgsv: Incorrect handling of "partial" write of log record to file [#536]
    * uml: Support both TCP and TIPC transports in UML environment [#587]
    * logsv: Fix time formatting for logrecords, @Cd and @CD [#565]
    * logsv: improved error handling in rda callback [#567]
    * ntf/tests not checking ret code [575]
    * ntf/test: use stat on ntfsv_test_classes.xml before immcfg [#575]
    * amfnd: terminate comps when failed NPI SU is in TERMINATING state [#338]
    * IMM: Fix memory leak when ncs_lock failed in IMM agent [ #563 ]
    * IMMTEST: Cleanup the code and fix memory problem [#552]
    * IMM: New active IMMD sends redundant discard-node for payloads [#563]
    * amfd: exit at MDS quiesced event in wrong state [#516]
    * IMM: fix memory leak in imma_search_node_delete function [#549]
    * ntftests: Fix and complete test suites [#303]
    * avnd: fix print of sizeof [#310]
    * amfsv: Donot assign SUSI to instantiating SU during SG unlock [#562]
    * logtest: Backtraces and fixes to handle diff between 4.3 and 4.4 [#541]
    * logtest: Comment testcases with description of what is tested [#541]
    * logtest: Fix incorrect error print at FAIL [#541]
    * logtest: New function for validate in test fm when using external tools e.g. immadm. [#541]
    * logtest: Replace hard coded root path with root path fetched from log service IMM config object [#541]
    * smfd: Re-read SaAmfSU attribute saAmfSUHostedByNode until set (#557)
    * IMM: Abort sync when deadlock detected between sync and PBE (#556)
    * osaf: Update docs with new component name BASE
    * IMM: fix memory leak when SaAnyT atrribute is size of 0 [#550]
    * pyosaf: fix type for additionalText [#553]
    * pyosaf: correct python bindings for saImmOi [#548]
    * amfnd: improve validation of received msgs [#310]
    * IMM: Correction in finalizeSync for veteran implementer-check [#551]
    * IMM: Correction to ccb handling in immnd_fevs_local_checks() [#535]
    * IMM: Ignore spurious/redundant ccb-apply from client [#535]
    * IMM: CcbApply retry logic made fevs safe [#535]
    * amfnd: handle avaDown event in RESTARTING state [#542]
    * amfnd: stop opensaf gracefully even if comp clean up fails duing opensaf shutdown [#540]
    * pyosaf: correct python bindings for saCkpt [#547]
    * pyosaf: correct python bindings for saClm [#546]
    * amfnd: correlate clc scripts response event based on comp name [#514]


OpenSAF 4.3.1 (released 2013-08-02)

    This is a maintenance release. The following items were fixed and/or added:

    * amfnd: issue callback to healthy components when fault occurs in quiescing state [#492]
    * amfnd: mark CSI state assigning for quiesced SI in comp restart recovery [#491]
    * amfnd: report failover after comp cleanup [#474]
    * plm: fix build errors from gcc version > 4.6 [#527]
    * dtm: Don't use NULL pointers or uninitialized data in error paths [#526]
    * osaf: setup sudo for killall cmd and enable amfwdog to use killall as non-root user [#451]
    * clm: lookup with node_name as key when node lockcallback timesout #[227]
    * osaf: remove sleep in amf terminatecallback of cpnd, glnd, immnd, mqnd, smfnd to enable amf-adm comp restart [#501]
    * cpsv: corrected the out of mem issue check of nref_info & cref_info part of ticket [#479]
    * cpsv: create non-collocated replica Imm run-time object maximum on 3 node [#479]
    * amfd: update assignment counters when component faults during shutdown op [#307]
    * fm: adjust reboot settings in the non-root scenario [#478]
    * fm: fix incompatible enum comparison error in #438
    * amfd: convert NO_REC recovery to COMP_FAILOVER in CCB modify op [#480]
    * fm: set rda role when failover is trigerred in the middle of switchover [#438]
    * amfd: Reset swap_switch if failover happens [#483]
    * amf: Resequence logs during si-swap of safSi=SC-2N,safApp=OpenSAF [#513]
    * amfnd: Don't execute terminate command for uninstantiated component [#485]
    * IMMTOOLS: fix handle finalize in immutil.c [#508]
    * leap: fix mapping of memory protection flags for mmap [#288]
    * amfnd: Ignore assignments at OPENSAF SHUTDOWN
    * amfnd: set SU DISABLED at TERM-FAILED [#481]
    * osaf: create threads in detached state: [#287]
    * smfd: campaign reexecution possible [476]
    * amfnd: fix admin comp restart to terminate [#7]
    * osaf: Add time supervision of opensaf_reboot [#437]
    * osaf: update nodeinit.conf softlink during rpm -Uvh [281]
    * amfnd: set SU DISABLED at TERM-FAILED [#301]
    * uml: Update to linux 3.9.5, busybox 1.21.0, tipcutils 2.0.3 [#304]
    * dtm: check both duplicate node_id & node_ip [#236]
    * pyosaf: fix saAmfInitialize_4 [#446]
    * amf: allow modify of CSI attrs without locking SI [#353]
    * IMM: fevs_local_checks does not spam syslog [#355]
    * dtm: set TCP socket option TCP_NODELAY [#273]
    * amfnd: remove premature nid response (#45)
    * Amf: fix node failover on controller [#222]
    * avsv: failover dependent SIs of other SGs during node lock (#2865)
    * dtm: call opensaf_reboot script instead of sourcing it (#43)
    * dtm: change assert to osafassert (#43)
    * cpsv: verify num users  before deleting non-collocated replicas (#161)
    * dtm: skip send to non connected nodes (#43)
    * avsv: allow two SUs on same node in nwayactive (#3066)
    * immtest: add tests for SA_IMM_PARAM_ADMOP_NAME as first parameter in admin operation invocation (#3138)
    * immsv: fix parameter position problem of operation name in admin operations (#3138)
    * leap: remove the assert in sysf_ipc:367
    * immtools:Printing the status for all the merge cases(#2)
    * Amf: Add validation during Sg and Su admin operation (#3117)
    * Amf: Instantiate SU as per configured saAmfSGNumPrefInserviceSUs (#2794)
    * opensaftools: Fix diffstat generated by review script [#3]
