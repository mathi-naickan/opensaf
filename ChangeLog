OpenSAF 4.4.1 (released 2014-10-07)

    This is a maintenance release. The following items were fixed and/or added:

    * IMM: Changed severity to ER for syslog message for fevs out of order #1149
    * dtm: fix compiler warning [#1152]
    * dtm: fix NULL ptr dereference [#1152]
    * imm: fix checks for allocated memory [#1130]
    * immtools: fix loading long data in immcfg [#1130]
    * imm: fix loading long data in immload [#1130]
    * base: remove setgid/setuid calls in execute_timed [#1138]
    * clm: do not send stale track to the node that rebooted and cameback [#1120]
    * clm: during failover, process agent down before node downs [#1120]
    * clm: avoid stale node down processing and unexpected track callback [#1120]
    * immtools: allocate enough memory for long log format in immcfg [#1089]
    * imm: add missing check in seach init [#1135]
    * IMM: Failure to send completed to PBE defaulted to ccb-recovery [#1127]
    * tools/safntf : validate ntfsend options V3 [#1069]
    * imm: In immnd_evt_proc_ccb_compl_rsp skip to end if PBE-OI is detached [#1096]
    * immtools: fix number of admin owner names to one [#1065]
    * imm:corrected trace log in setImplementer[#1084]
    * imm: fix memory leak in immload [#1099]
    * amfd : fix compilation issue [#759]
    * imm:fix memory leaks in finalizeSync [#1085]
    * log: Fix problem with creation of lots of .nfsxxx... files [#1042]
    * amf : disable oper state of faulty comp if SU is disabled [#1035]
    * amfd : update saAmfSINumCurr<Actv/Stdby>Assignments in SI during nodefailover [#759]
    * amfnd : do not send susi success response during su-failover [#1015]
    * imm: Corrected trace statement in cleanTheBasement [#1086]
    * imm:Removed the erase of iterator in migrateObj[#1097]
    * imm:corrected missing cl_node NULL check for imma resurrect [#1094]
    * imm:initalized the uninitialized variables in obj_delete and rt_obj_delete[#1098]
    * imm: check the end ccb iterator before accessing data for ccb augument [#1100]
    * imm: In saImmOiAugmentCcbInitialize goto function end if om_handle_init fails [#1095]
    * IMM: Extend osafassert check in ImmModel::adjustEpoch [#1090]
    * imm:corrected uninitalized error code in ccb delete and Completed rsp [#1103]
    * imm: Return TRY_AGAIN only when object apllier matches the Re-using implementerset info [#1078]
    * imm: ccbCreate - Fix expression for appending default values to ccb-create-callback [#1083]
    * IMM: Add client node NULL-check in immnd_evt_proc_fevs_forward [#1088]
    * imm: Compare err instead of assign in immnd_evt_proc_rt_object_delete [#1087]
    * smfd: better handling of admin op SI_SWAP return codes [#940]
    * base: check and truncate(with character T) logtrace messages >= 1023 bytes [#970]
    * amfd: respond node level admin op at sufailover during node unlock [#1044]
    * amfnd: perform su failover if npi su translates into inst fail state [#1025]
    * clm: imm reinit mechanism shall check for impl_set flag in BAD_OPER scenarios [#1067]
    * IMM: Reduce log severity database size messages [#866]
    * immtools:corrected variable declaration for immpopulate [#1052]
    * amfd: submit the left out portion of the fix [#708]
    * IMM: PBE exits on errors where sqlite-handle has been closed [#996]
    * imm:Return AIS_OK when m_NCS_IPC_RECEIVE receives NULL in dispatch block[#937]
    * imm:Return TRY_AGAIN if implemeter is not yet discarded [#946]
    * imma: add missing lock when traversing client db from mds thread [#1033]
    * IMM: Document persistence behavior for system attribues [#967]
    * IMM: immsv/README Clarify when attribute default values get assigned [#968]
    * imm:corrected memory corruption problem when ccberrorstring is used in modify/create callback[#961]
    * amf: remove stray character in xml [#1012]
    * log: Add new tests for validation of attributes at create/modify stream conf obj [#448]
    * log: Fix incorrect test cases in current test suite [#448]
    * log: Fix validity check for IMM create/modify stream [#448]
    * smf: pbe is restored before campaign state is updated [#944]
    * amfd: instantiate su as per saAmfSGNumPrefInserviceSUs [#445]
    * smf: read rollback data before IMM object is deleted [#993]
    * amfd: return admin op when csi assign/remove is over [#372]
    * amfd: return FAILED_OP to RtAttrUpdateCallbackT if RtObjectUpdate_2 fails [#426]
    * amfd: fix build issue [#582]
    * amfd: allow lock on su after issue of shutdown [#582]
    * amfd: start clm track and mark sg stable after node failover [#708]
    * amfd : fix amfd crash during su level faults in su or node lock [#992]
    * amfnd : mark SU UNINSTANTIATED if all comps are UNINSTANTIATED during compfailover [#359]
    * amfnd : mark single comp SU RESTARTING during component restart [#358]
    * amfd : fix node failover while assigning standby state during si-swap [#309]
    * amfd : reply for admin operation on SG after its completion [#293]
    * amfnd: remove white space [#870]
    * amfnd: log events relating to error escalation timers [#870]
    * smf: retry modify information model upon CCB abort post cluster restart [#973]
    * dtm: set IPV6_MULTICAST_IF sock option on snd/rcv sock to use specific interface[#933]
    * ntf: Add testcase for testing that 256 is not a valid length for SaNameT [#892]
    * ntf: Fix validation of length for SaNameT [#892]
    * log: New testcases for testing max length handling og SaNameT [#891]
    * log: Fix server error handling if SaNameT length is 256 or bigger [#891]
    * log: Fix validation of SaNameT length in agent [#891]
    * smfd: calculate steps for SU template activation units correctly [#971]
    * plm: invoke tzset before localtime_r [#958]
    * plm: use thread safe localtime_r instead of localtime [#958]
    * ntf: use thread safe localtime_r instead of localtime [#958]
    * amf: use thread safe localtime_r instead of localtime [#958]
    * mds: use thread safe localtime_r instead of localtime [#958]
    * osaf: use thread safe localtime_r instead of localtime [#958]
    * cpa: correct peer msg_fmt_ver in cpa_mds_enc function [#745]
    * log: delete associated runtime object whenever app stream is deleted [#917]
    * IMM:  Provide validation for config changes on imm service objects [#951]
    * amf : perform node-switchover after component cleanup [#387]
    * amfd : update dependent dep_state if fail-over of dependent fails [#692]
    * amfd : standby AMFD should process ccb completed cbk for delete [#947]
    * log: For overload limits use environment variable value if limit in config object is 0 [#941]
    * Did osaf_abort() for invalid fd in RDA recv[#928]
    * amfnd : speed up shutdown of standby SC upon failover during its shutdown [#942]
    * amfd: default saAmfSGNumPrefInserviceSUs to unlimited [#278]
    * base: Corrected handling of raise_obj, rmv_obj file descriptors of Selection object [#928]
    * amfd : skip processing of ccb completed cbk at standby amfd [#305]
    * log: Cleanup some findings [#924]
    * cpsv: set dataSize to zero in case of section deletion in the TrackCallback [#734]
    * cpsv: set dtaBuff to NULL and readSize to zero in TrackCallback [#733]
    * base: Do not use slashes in the names of POSIX shared memory segments [#909]
    * amfnd: Fix spelling mistakes [#870]
    * amfnd: Improve logging for error escalation decisions [#870]
    * amfnd: stop running timers when su is locked-in [#831]
    * amfd: Remove asserts from validation routines [#849]
    * amfnd: fix process of proxy proxied cleanup on OpenSAF shutdown [#629]
    * log: Fix incorrect type conversion in fileclose_hdl [#923]
    * log: Fix possible thread race on timeout in file api [#919]
    * log: Fix thread communication buffer initiation [#922]
    * amfd: send node down notification during controller failover [#914]
    * amfd: create SI to store ckpt:ed dep_state [#926]
    * log: Do not abort if osaf_timespec_compare returns 0 [#918]
    * log: Fix calculation of timeout time on 32 bit systems [#918]
    * log: handle ending quote for messages in variable log records [#882]
    * dtm: Segregate IPv4-Sub-net & IPv6 Link-Local/Global for discovery broadcast [#913]
    * smfsv: Comments in ETF schema for SaTimeT unified, all specifies nanoseconds [#925]
    * amfnd : fix SU restart escalation [#885].
    * amfd: allow increase of saAmfSGNumPrefActiveSUs for N+M SG while UNLOCKED [#871]
    * immpbe: unlink any /tmp/imm.db.xxxx file and journal when exiting on error [#869]
    * clm: pass client_id for deletion; post to mbox only when svc_id is filled [#888]
    * smfd: campaign can be committed after cluster reboot in state completed [#906]
    * amfd: return try_again to sg admin unlock-in if any su is in terminating state [#854]
    * smfd: wait for node destination before command execution [#893]
    * amfnd : avoid multiple clean up of comps during shutdown phase [#890].
    * amfd: update RT objects during node-failover of active controller [#494].
    * amfd: Allow multiple csi addition in single ccb [#750]
    * amfd: instantiate mw sus when node is joining [#863]
    * imm: fix memory leak in IMM library when search handle is closed [#907]
    * clm: setup mds and mbcsv role first during role change [#800]
    * clm: process node down outside impl_set thread to avoid race [#800]
    * amfd: fix SU in-service check [#493]
    * osaf: Fix compilation errors when building with GCC 4.9.0 [#883]
    * amfd: syslog no assignment of SI when it is unlocked [#867]
    * log: saflogtest to return EXIT_FAILURE when SaLogWriteLogCallbackT fails [#884]
    * log: saflogger to return EXIT_FAILURE when SaLogWriteLogCallbackT fails [#884]
    * log: fix errno usage for calls to strtoul [#841]
    * log: ignore environment variables when config object exists [#841]
    * log: Log should not retry when close() returns EINTR [#147]
    * Imm:Make immcfg aware of safImmService admin owner for opensafImm=opensafImm,safApp=safImmService [#840]
    * amfnd: Cancel qscing timer on CSI removal [#583]
    * amfd: fix infinite loop when processing CLM node tracking [#877]
    * amfd: assign only one csi per component for NPI SU [#856]
    * immtools: revert old way of parsing default values and add a flag for more strict parsing values in immcfg [#861]
    * log: allow zero sized log records for app streams [#857]
    * amfd: Respond with TRY_AGAIN to admin ops during a controller switch-over [#821]
    * amfd: fix imm job update [#868]
    * IMMTOOLS: fix errors compiled with 32-bit compiler [#838]
    * log: saflogger tool to honour try again [#839]
    * amfnd: update saAmfSURestartCount & saAmfCompRestartCount during escalations [#847]
    * IMM:Removed Implementer name for config objects while loading [#543]
    * lgsv: Change logStreamAppHighLimit default from 1 to 0 [#841]
    * amfnd: fix re-instantiation of failed component [#844]
    * amf: include and use su_failover in REG_SU msg [#574]
    * amf: include and use comp capability in SUSI msg [#574]
    * amf: include and use sirank in SUSI msg [#574]
    * IMM: fix memory leak in IMM [#834]
    * IMM: 2PBE - PBE-A tolerates BAD_OPERATION reply on ccb-prepare from PBE-B [#830]
    * amfd: return AIS_OK instead of BAD_OP for si-swap admin op [#823]
    * amfd: act on dependent if sponsor gets unassigned in NoRed [#832]
    * amfd: return BAD_OP for repair operation for su hosted on absent node [#826]
    * amfd: return TRY_AGAIN for su/node lockin op if su pres state is not appropriate [#807]
    * amfnd: send SUSI response after cleanup of comp [#822]
    * amf: cleanup dnd edu [#574]
    * clm: clmna to be respawned by nid when node join request fails [#816]
    * clm: change log message for unconfigured nodes, connectivity problems [#816]
    * clm: add null check for unconfigured node join request [#816]
    * IMM: Special applier callbacks for PRTO deletes are re-established [#835]
    * dtm: avoiding node reboot for invalid/miss configuration [#444]
    * amfnd: fix failover of NPI SU during SU lock with fault [#820]
    * amfd: auto clear comp cleanup failed alarm [#538]
    * amfd: reboot node when term-failed SU [#538]
    * amfd: allow modification of node repair attributes [#538]
    * amfd: send notification when SI first assigned to SU [#544]
    * pyosaf: Add support for extended Ckpt api [#802]
    * logsv: Do not allow NULL pointers for string variables in OI validity check [#771]
    * logsv: Handle error return from localtime_r [#805]
    * logsv: Fix handling of Om initialize / finalize when creating app stream [#804]
    * IMMTOOLS: fix the schema name for immxml tools to comply with the latest schema known by the release [#796]
    * smfd: deletion of objects owned by SMF possible regadless of DN [#752]
    * osaf: Update the commit message template [#791]
    * amfd: defer switch-over of dependent SI to after sponsor SI [#803]
    * IMMTOOLS: fix incorrect error message for deleting class in immcfg [#794]
    * IMM: Use existing PBE mutation record to guard against concurrent class create/delete [#757]
