OpenSAF 4.5.2 (released 2015-11-01)
-----------------------------------

This is a maintenance release. The following items were fixed:

    * imm: Clear sImplDetachTime when aborting sync [#1579]
    * cpsv: raised track callback for non-collo ckpt section create/delete [#1305]
    * amfd: fix deletion of runtime objects of class SaAmfSIAssignment [#1540]
    * log: incorrect verification the string length of saLogStreamFileName value [#1493]
    * log: fix crashed with saLogStreamFixedLogRecordSize=1 [#1466]
    * tests/ntf: add test cases for saNtfFinalize [#1521].
    * ntfa: fix deadlock situation due to saNtfFinalize [#1521].
    * cpsv: review comments on changeset 6998 [#242]
    * imm: synchronize applier set on all nodes [#1504]
    * cpsv: introduced null check for SecPtr to prevent ckptnd crashed (multithreading)app [#242]
    * log: crashed when performing admin op on configurable obj class [#1420]
    * logsv: fix cannot set saLogStreamSeverityFilter value back to default one (127) [#1395]
    * amf: fix spec deviation of surestart escalation [#315]
    * plm: fix deactivate for ATCA [#1289]
    * amfd: don't crash if nodegroup is added with node in the same CCB [#1458]
    * amfd: allow SU to be created [#1458]
    * amfd: allow nodeswbundle to be deleted [#1458]
    * amfd: allow nodegroup to be modified [#1458]
    * amfd: fix comp term_failed state alarm [#1473]
    * ckpt: ckptnd doesn't handle fault case when creating share memory at start up [#1423]
    * pyosaf: Add saImmOmCcbGetErrorStrings to saImmOm [#1506]
    * mds: fixed compilation issue gcc version 4.8.3 [#1487]
    * amfd: revert of cs 6903:df17af2ca978 [#1501]
    * amfnd: correct ha_state before returns to comp for saAmfHAStateGet [#1444]
    * amfd: update pure runtime attributes only in IMM callbacks [#185]
    * amfnd: reset term_cbq_inv_value in finalize call [#1505]
    * imm: correct ccbId in immnd_evt_proc_ccb_apply [#1501]
    * amfd: include comp and su oper state at standby amfd[#1141]
    * imm: fix memory leak in schema upgrade [#1495]
    * mds: unlock mutex when 0 bytes is read from TIPC socket [#1497]
    * logsv: fix logsv gets stuck in a loop if passing zero(0) to maxFilesRotated [#1399]
    * imm: Don't allow default values to be defined with NO_DANGLING flag when creating classes [#1474]
    * imm: Don't assign default values to empty valued attributes when sync [#1472]
    * amfd: act on dep SIs if tol timer expires during controller fail-over [#427]
    * amfd: maintain runtime updates for su, comp, si and csi at standby [#1141]
    * amfnd: avoid creating existing safHealthcheckKey record in amfnd database [#1363]
    * amfd: do not create compcsi of dependent csis if sponosr csi is unassigned [#1333]
    * imm: fix memory leak in display resources [#1477]
    * cpsv: prevented multiple write request with same checkpointHandle at cpnd [#1467]
    * mds: Optimized the mds mutex locks code [#1338]
    * mds: fixed memory leak in opensf authenticate code [#1475]
    * imm: fix memory leaks caused by ncs_enc_init_space [#1469]
    * mds: fix memory leak of MDS_PROCESS_INFO structure in MDS [#1462]
    * immtools: Set admin-owner to parent object with SA_IMM_ONE scope when creating objects with immcfg [#1429]
    * imm: Discard CCB when client dies before receiving ccbInitRsp message [#1428]
    * imm: Discard admin-owner when client dies before receiving adminInitRsp message [#1427]
    * amfnd: comp receives QUIESCED csi when it has not received ACTIVE csi V4  [#1386]
    * imm: Discard implementer when can't get client-node after receiving implSetRsp message [#1424]
    * log:  Use root name when searching for stream objects [#1452]
    * log: Incorrect reading of stream configuration objects at startup [#1450]
    * immtest: add handling of SA_AIS_ERR_TRY_AGAIN in cleanup and startup functions [#1413]
    * imm:Decrement sqliteTransLock when BEGIN EXCLUSIVE TRANSACTION fails [#1426]
    * imm: subtree does not contain longdn then ERR_TOO_LONG will not be returned [#1430]
    * clm: don't always checkpoint nodes in plm readiness callback completed state [#1416]
    * amfd: fix N+M identification of standby SU at controller failover [#1414]
    * amfnd: send csi remove information in pg cbk [#173]
    * amfd: take next si for assignment in error case [#1310]
    * amfnd: delete the hc rec memory in error case [#1115]
    * amfd: log about invalid configuration of saAmfSGNumPrefActiveSUs/StandbySUs [#296]
    * amfd: validate su existance in sirankedsu object create [#164]
    * amfd: make ccb op and mw si swap mutually exclusive [#1105]
    * plm: don't restart EE in opensaf_reboot unless it is instantiated [#1415]
    * IMM: Internal abort of active but idle CCB can cause invalid OM-handle [#1412]
    * pyosaf: Fix broken marshalling in saImmOiRtObjectUpdate_2 in saImmOi.py [#1411]
    * pyosaf: Fix broken marshalling in saImmOiRtObjectCreate_2 in saImmOi.py [#1409]
    * pyosaf: Fix broken marshalling of the attribute list in saImmOmSearchInitialize_2 in saImmOm.py [#1408]
    * pyosaf: Correct 'SaClmNodeItT' typo in saClm.py #1405
    * pyosaf: Add missing import of 'SaImmAdminOwnerHandleT' in saImmOi.py #1404
    * pyosaf: Add missing import of 'SaImmCcbHandleT' in saImmOi.py #1403
    * pyosaf: Correct 'SaImmOiCcbItT' typo in saImmOi.py [#1402]
    * plms: standby plms also calls saHpiHotSwapPolicyCancel & saHpiAutoExtractTimeoutSet
    * imm: Add testcases for NO_DANGLING [#1385]
    * imm: fix message log level and correct typo [#1388]
    * amfnd: mark su in instantiating state [#1392]
    * amfnd: amfnd: fix double free of cbk_info [#1321]
    * tools/amf: fix errors during switchover/failover [#1384]
    * imm: create NO_DANGLING references in finalizeSync [#1381]
    * imm: Check no-dangling map before adding new references when committing modify-op [#1377]
    * IMM: Correct syslog severity in ImmModel.cc [#1382]
    * ntf: Test, Fix ntftest suite 22 test 3 fails [#1379]
    * cpsv: enhance cpnd to shm read/write size to SaOffsetT [#1372]
    * leap: enhance posix_shm() to accommodate SaOffsetT [#1271]
    * amfd: try again if ImplementerClear times out [#1360]
    * amfd: ignore invalid modification of saAmfSGMaxActiveSIsperSU/saAmfSGMaxStandbySIsperSU [#1361]
    * smfd: get nodes for activation without warning if entity was a node [#960]
    * ntftool: ntfread and ntfsubscribe do not check invalid options [#1355]
    * ntftools: fix ntfsend says --help option is not recognized [#1352]
    * log: fix unable to rename cfg file when changing saLogStreamFileName attribute [#1346]
    * amfd: validate ctcstype relationship while modifying comptype in comp [#1302]
    * amfd: validate CSType when creating CtCsType and SvcTypeCsTypes [#986].
    * amfd: adjust saAmfSINumCurrStandbyAssignments during HA state change [#1276]
    * imm: update document for OI callback timeout [#1347]
    * cpsv : fix CPA & CPND memleak [#1373]
    * samples: ckpt_demo-set section expirationtime to absolute time [#1270]
    * osaf: Changes to amfwdog for adminrestart support [#1326]
    * osaf: During adminrestart of node directors, before re-instantiating kill them [#1326]
    * amfd: node rebooted when immnd is killed twice in succession V2 [#1290]
    * smfd: increased IMMA timeout value [#1368]
    * plm: Fix GCC 5.1.0 compiler warning [#1340]
    * mds: Fix GCC 5.1.0 compiler warning [#1340]
    * amf: Fix GCC 5.1.0 compiler warning [#1340]
    * amfd: send data verify message to node in NO_CONFIG and NCS_INIT also [#1359]
    * amfd: avoid null pointer access [#1365]
    * log: log_stream_config_change() renames files successfully, but makes return (-1) [#1366]
    * amfd: respond to nid only after initialization is completed [#1334]
    * amfa: avoid illigal memory access [#1307]
    * immtools: corrected segmentation fault in immcfg when illegal character is given [#1351]
    * immsv: Revert imma_client_node->replyPending to unsigned char [#1341]
    * amfd: Re-align SG if NodeFailover happens at quiesced assignment during si-swap [#1312]
    * amfd: Fix segv in avd_sidep_is_si_failover_possible [#1309]
    * smfd: adjust smfRebootTimeout to include time spent in getNodeDestination [#1272]
    * smf: redundant <swAdd> and <swRemove> entries in single step procedures are removed [#1299]
    * imm: validate SaNameT value before osaf_extended_name_length [#1303]
    * IMM: Document AdminOwner clear/release minor discrepancy with SAF spec [#1287]

OpenSAF 4.5.1 (released 2015-04-10)
-----------------------------------

This is a maintenance release. The following items were fixed:

    * IMM: Halt sync with SIGKILL insted of SIGTERM and replace assert with error [#1295]
    * log test: Fix test cases for better handling [#1292]
    * amfd: segv at configuration validation error #1297
    * amfd: do not send multiple notificaitons for node admin state [#1284]
    * amfnd: send comp-failover request to AMFD before assignment response [#1259]
    * smfd: handle all rc in routine updateImmAttr [#1253]
    * amfd: reset admin op params during controller role swap [#1257].
    * amfd: checkpoint node admin state during clm lock [#409]
    * imm: revert #969 for IMM library [#1267]
    * pyosaf: add  saAis import [#751]
    * amfd: avoid failover in completed step of clm track when plm is enabled [#1264]
    * IMM: Larger timeout on cleanup of PRT/class-change request continuations [#1266]
    * ntfa: fix mutiple mutex lock/unlock on ntfa_cb in saNtfNotificationSend [#1263]
    * plm: add systemd dependency between plmcd and opensafd [#455]
    * clm: retry when notificationsend return TRY_AGAIN and log error [#1195]
    * imm: fix memory leak in search init [#1265]
    * amfd: send commit message after async updates [#371]
    * amfnd: issue remove cbk for assigning csi after successful assignment V2[#1046]
    * amfd: do not assign dependent csi if any sponsor csi is unassigned [#687]
    * amfd: do not allow duplicate addition of node in a nodegroup V2[#646]
    * amfd: mark unlocked-in amf node disabled upon clm exit [#496].
    * amfd: update si_dep_state for all the dependents on a failed node [#1045]
    * imm: add new API functions for replacement SaNameT with SaStringT [#643]
    * dtm: add syslog before assertion on fault-configuration [#956]
    * test-mds: tune testsuite 6 of 6 message size below the default heartbeat time ofavsv [#1005]
    * mds: part of mds log improvements [#520]
    * IMM: Change log severity from ERror to WArning for PBE missmatch on op-count [#1260]
    * amfd: add mutex to sync up among amfd threads [#405, #707]
    * dtm: changed maximum processes allowed per node configurable for tcp transport [#1187]
    * osaf: ignore ENOENT for setgrent() for supporting UML [#1181]
    * mds: replace direct buff static array send buffer with dynamic memory [#1246]
    * amfd: assign only one csi per NPI component for PI SU  [#1237]
    * IMM: immsv/README Clarify that augmented CCBs must be kept pure [#1208]
    * amfd: change LOG_ER to traces in si equal distribution in NpM [#1192]
    * amfd: fix amfd crash while updating saAmfSGMaxActiveSIsperSU [#1210]
    * amfd: add SG and SU name in error string [#1174]
    * amfd: validate parent name of SI and its protecting SG [#1161]
    * plm: fix memory corruption in plms [#1244]
    * smfd: attribute smfClusterControllers value can be modified to <empty> [#1252]
    * mds: replace static array send buffer with dynamic memory [#1248]
    * mds/tcp: correct memcopy size of contiguous USRBUF in fragment send [#1247]
    * log: Fix @Nd token printing empty value [#900]
    * imm: corrected compilation error [#1250]
    * imm: Return TRY_AGAIN for CcbApply when fevs_replies_pending greater than or equal to IMMSV_DEFAULT_FEVS_MAX_PENDING [#1250]
    * amfnd: ignore unwanted events during node failover [#1249]
    * log: Fill creation time statmp when creating application stream with config object [#975]
    * imm: exit the pbe when the verification of class returns TRY_AGAIN [#1245]
    * imm : Added IMM_ERROR check for out_evt type in AugmentCcbInitialize [#1243]
    * smf: node iterator stepping fixed in nodeReboot [1241]
    * smf: parsing of parent and type combinations possible in activationUnitTemplate [#1199]
    * amfd: return try_again to si-swap during amfd cold sync [#1169]
    * uml: Improve the UML cluster simulator [#1197]
    * mds : protect mds application form zero bytes hacking messages [#1227]
    * mds: correct memcopy size of contiguous USRBUF in fragment send [#1239]
    * amfd : update SI admin state during shutdown op with fault [#488]
    * imm: corrected the time return value check if the unix time is reset [#1236]
    * ntf/safntf: fix ntfsubsribe redirection issue v2[#502]
    * ntf/safntf: send all types of events using ntfsend [#1102]
    * ntf/safntf: print lengthAdditionalText with ntfsubscribe -v [#1215]
    * imm: Trailing slash can be ignored when checking IMMSV_ROOT_DIRECTORY [#1093]
    * smf: reading of longDnsAllowed attribute does not block [#1230]
    * amfa: avoid crash in synchronous saAmfResponse() call [#1233]
    * amfd: fix mem leak in su_to_terminate function [#1226]
    * log: Incorrect syslog if fail to close files when closing log stream [#1129]
    * immsv: Correct the jobDuration condition for IMM_SERVER_CLUSTER_WAITING state [#953]
    * imm: Corrected warning message when sync is taking more than five minuets [#1119]
    * log: Testcase logtest 4 1 cleanup sfter test [#1178]
    * log: Fix typo llogtestfr in tests/logsv/Makefile.am [#1213]
    * release: Update AUTHORS file with current list of maintainers
    * clm: fix corner cases in node_down processing [#1221]
    * clm: fix the case when duplicate node downs are found part 3 [#1221]
    * clm: remove defective null initialize in the fix for 1221 [#1221]
    * clm: protect node down processing when checkpointing arrives earlier - v2 [#1221]
    * ava : free msg response in saAmfResponse() for term cbk [#1220]
    * imm: add long DN checks for multivalue attributes in search result [#1206]
    * Imm: Return TRY_AGAIN when slave PRTA timesout and prepare arrives after the slave timeout [#1211]
    * imm: fix search/accessor functions when a client does not support long DN [#1206]
    * plm: allow dynamic modification of saPlmDependency [#1030]
    * imm: add check for extended names in admin op callbacks [#1214]
    * IMM: Document NAME_TOO_LONG returned if OI/OM missmatch in long DN capabilities [#1219]
    * imm: fix saImmOmCcbApply timeout problem when CCB validation is done [#1216]
    * IMM: Protect non long DN capable clients in modify callback [#1204]
    * IMM: Detect long DN/parentDN, long RDN, long SaNameT attr for create callback [#1204]
    * amfd: create app data if doesnot exist [#1207]
    * immtools: Initialization of IMM tools has been changed to latest IMM API version A.2.14 [#1198]
    * tools/amf : fix timeout option in amf-adm comand [#1013]
    * immutils: fix long DN problems in immutils [#1104]
    * ntfimcn : change LOG_ERR to LOG_NO during shutdown [#1196]
    * imm: remove CCB timeout when CCB augmentation is closing [#1183]
    * smfd: no unneccessary delay at node reboot [#1203]
    * amfd: correct logic in si dep in npm red model [#1193]
    * mds: fix valgrind complaints [#1160]
    * IMM: Correction to idempotent ObjectImplementerSet during sync [#1202]
    * pyosaf: add ctypes import [#751]
    * IMM: saImmOmCcbValidate must cancel ccb-timer before returning [#1201]
    * pyosaf: remove IMM_A_01_01 from saImm.py [#751]
    * pyosaf: fix saEnumConst.py pylint rating [#751]
    * pyosaf: fix saImmOm.h pylint rating [#751]
    * pyosaf: fix saImm.h pylint rating [#751]
    * pyosaf: fix saAis.h pylint rating [#751]
    * pyosaf: remove IMM_A_01_01 from saImm.py [#751]
    * log: Log crash if no parameters in admin operation [#1164]
    * log: Test IMM OM request to change filter with no parameters [#1164]
    * log: Add logtestfr to opensaf.spec.in [#1175]
    * log: Testing file rotation with corrupt file name [#1175]
    * log: Fix oldest file search in log rotation [#1175]
    * immtools: remove admin owner output in immadm [#1155]
    * 2PBE: PBE slave restart during class-create must regenerate imm.db [#1092]
    * amfd: Update SI dependencies after SU Failover for NpM SG V2 [#1101]
    * smf: handle the suspended single step cluster reboot campaigns to continue after reboot [#1118]
    * IMM 2PBE: Slave main thread avoids aborting ccb during prepare [#1080]
    * amfd: revert role of standby if no act exists [#1191]
    * imm: fix return code in admin operation when return params contain valid extended name [#1189]
    * IMM: Sync-retry reverted back to milliseconds with increase on retries [#1188]
    * IMM 2PBE: Abort-callback before completed-callback aborts sqlite-trans [#1063]
    * log: Protect waiting for ntfimcn process to exit [#1110]
    * mds: Make TIPC multicast optional [#1171]
    * imm:loading of 2PBE will fail when loaded with xml [#1173]
    * dtm: remove O_NONBLOCK option on DTM TCP transport sockets [#607]
    * mds: remove O_NONBLOCK option on MDS TCP transport sockets [#607]
    * IMM (2PBE): Fix incorrect transaction abort in slave PBE [#1057]
    * IMM (PBE): Return NO_RESOURCES to avoid "validation error" from PBE [#1057]
    * IMM (2PBE): Slave PBE regenerates file when restarted soon after PRT error [#1057]
    * pyosaf: fix saImmOmAdminOperationInvoke_2 [#1176]
    * amfd: allow admin commands before cluster timer expiry [#620]
    * mds: change tipc_or_tcp variable from string to bool to avoid strcmp [#998]
    * smf: Fix memory corruption and resource leak when CLM returns error [#1166]
    * immtools:loading XML file with immcfg will not abort when classname is not preset [#1168]
    * IMM: Validating longDnsAllowed=0 checks normal RDNs are at most 64 bytes [#1009]
